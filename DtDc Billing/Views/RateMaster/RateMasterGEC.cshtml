@model IEnumerable<DtDc_Billing.Entity_FR.GECrate>
@{

    Layout = null;
}
<section>
    <div class="" style="padding: 20px; border: 1px solid #dddddd;">
        @{
            var successMessage = ViewBag.Message as string;
            var mem = TempData["Message"];
        }


        @if (!string.IsNullOrEmpty(successMessage))
        {
            @Html.Partial("~/Views/Shared/AlertPartial.cshtml", new Tuple<string, string>("success", successMessage))
        }

        @using (Ajax.BeginForm("RateMasterGEC", "RateMaster", new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "frmEmp8", OnBegin = "onBegin", OnComplete = "onComplete" }))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <input type="hidden" value="@ViewBag.companyid" name="comppid">


            @*if (Model != null &&  Model.Count() != 0)
                    {
                        foreach (var item in Model)
                        {
                            if (item.NoOfSlab != null)
                            {
                                <div class="col-sm-6 col-sm-offset-3">
                                    <div class="box-header">
                                        <div class="col-sm-4">
                                            <label>  @Html.RadioButtonFor(m => item.NoOfSlab, 2) Slab 2</label>
                                        </div>
                                        <div class="col-sm-4">
                                            <label> @Html.RadioButtonFor(m => item.NoOfSlab, 3)  Slab 3</label>
                                        </div>
                                        <div class="col-sm-4">
                                            <label> @Html.RadioButtonFor(m => item.NoOfSlab, 4)  Slab 4</label>
                                        </div>
                                    </div>
                                </div>

                                            break;
                                        }


                                else
                                {


                                <div class="col-sm-6 col-sm-offset-3">
                                    <div class="box-header">
                                        <div class="col-sm-4">
                                            <label>  @Html.RadioButtonFor(m => item.NoOfSlab, 2, new { @checked = "checked" }) Slab 2</label>
                                        </div>
                                        <div class="col-sm-4">
                                            <label>  @Html.RadioButtonFor(m => item.NoOfSlab, 3) slab 3</label>
                                        </div>
                                        <div class="col-sm-4">
                                            <label> @Html.RadioButtonFor(m => item.NoOfSlab, 4)  Slab 4</label>
                                        </div>
                                    </div>
                                </div>

                            break;


                        }
                    }

                }*@
            if (Model != null && Model.Count() != 0)
            {
                foreach (var item in Model)
                {
                    if (item.GECNoOfSlab != null)
                    {
                        <div class="col-sm-6 col-sm-offset-3">
                            <div class="box-header">
                                <div class="col-sm-4">
                                    <label>@Html.RadioButtonFor(m => item.GECNoOfSlab, 2) Slab 2</label>
                                </div>
                                <div class="col-sm-4">
                                    <label>@Html.RadioButtonFor(m => item.GECNoOfSlab, 3) Slab 3</label>
                                </div>
                                <div class="col-sm-4">
                                    <label>@Html.RadioButtonFor(m => item.GECNoOfSlab, 4) Slab 4</label>
                                </div>
                            </div>
                        </div>
                        break;
                    }
                    else
                    {
                        <div class="col-sm-6 col-sm-offset-3">
                            <div class="box-header">
                                <div class="col-sm-4">
                                    <label>@Html.RadioButtonFor(m => item.GECNoOfSlab, 2, new { @checked = "checked" }) Slab 2</label>
                                </div>
                                <div class="col-sm-4">
                                    <label>@Html.RadioButtonFor(m => item.GECNoOfSlab, 3) Slab 3</label>
                                </div>
                                <div class="col-sm-4">
                                    <label>@Html.RadioButtonFor(m => item.GECNoOfSlab, 4) Slab 4</label>
                                </div>
                            </div>
                        </div>
                        break;
                    }
                }



                <table class="table table-bordered table-striped" @*id="DoxTable"*@>
                    <thead>
                        <tr class="upto-input">
                            <th>
                                @*<h4>Sectors</h4>*@
                                @*<input type="hidden" name="hide" value="@ViewBag.Slabs.Uptosl1" />*@
                            </th>
                            <th>
                                <label>Upto</label>
                                <input type="text" name="Upto" value="@ViewBag.SlabGEC.Uptosl1" />
                                <label>Kg</label>
                            </th>
                            <th class="gecslab2">
                                <label>Upto</label>
                                <input type="text" name="Upto" value="@ViewBag.SlabGEC.Uptosl2" />
                                <label>Kg</label>
                            </th>
                            <th class="gecslab3">
                                <label>Upto</label>
                                <input type="text" name="Upto" value="@ViewBag.SlabGEC.Uptosl3" />
                                <label>Kg</label>
                            </th>
                            <th>
                                <label>Additional</label>
                                <input type="text" name="Upto" value="@ViewBag.SlabGEC.Uptosl4" />
                                <label>Kg</label>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Count() != 0)
                        {
                            foreach (var item in Model)
                            {
                                <tr>
                                    <td class="sectors">
                                        @Html.DisplayFor(modelItem => item.SectorName)
                                    </td>
                                    <td>
                                        @Html.EditorFor(modelItem => item.Slab1)
                                    </td>
                                    <td class="gecslab2">
                                        @Html.EditorFor(modelItem => item.Slab2)
                                    </td>
                                    <td class="gecslab3">
                                        @Html.EditorFor(modelItem => item.Slab3)
                                    </td>
                                    <td>
                                        @Html.EditorFor(modelItem => item.Slab4)
                                    </td>
                                    <td class="hidden">
                                        @Html.HiddenFor(modelItem => item.GECrateId)
                                    </td>
                                    <td class="hidden">
                                        @Html.HiddenFor(modelItem => item.Sector_Id)
                                    </td>

                                </tr>
                            }
                        }
                        else
                        {
                            <tr>No Data Found</tr>
                        }
                    </tbody>

                </table>
                <input type="hidden" id="selected_tab" name="selected_tab" value="2" />
                <div class="col-sm-12">
                    <input class="btn bg-maroon pull-right" type="submit" name="submit" value="Save" />
                </div>
            }
        }

    </div>
</section>




<script>
    $(document).ready(function () {

        //$('#DoxTable td:nth-child(2)').hide();
        //$('#DoxTable td:nth-child(3)').hide();

        //$('#DoxTable th:nth-child(2)').hide();
        //$('#DoxTable th:nth-child(3)').hide();

        var data = '@ViewBag.GECratemaster';
        var test = 2;
        if (data != 0 && data!=null) {

                    var test = '@ViewBag.GECratemaster[0].GECNoOfSlab';

        }

        //alert(test);

        console.log(test);

        if (test == 2) {

            $('.gecslab2').hide();
            $('.gecslab3').hide();

            $('#only').val(2);

        }
        else if (test == 3) {


            $('.gecslab2').show();




            $('.gecslab3').hide();


            $('#only').val(test);
        }
        else if (test == 4) {

            $('.gecslab2').show();
            $('.gecslab3').show();



            $('#only').val(test);
        }



        $("input[name$='GECNoOfSlab']").change(function () {

            var test = $(this).val();

            //alert(test);

            console.log(test);

            if (test == 2) {
                $('.gecslab2').hide();
                $('.gecslab3').hide();

                $('#only').val(2);

            }

            else if (test == 3) {


                $('.gecslab2').show();




                $('.gecslab3').hide();


                $('#only').val(test);
            }
            else if (test == 4) {

                $('.gecslab2').show();
                $('.gecslab3').show();



                $('#only').val(test);
            }


        });
    });
</script>






@if (ViewBag.Message != null)
{
    <script>

$(document).ready(function(){

//alert('@ViewBag.Message');

});

    </script>

}


@*@if (ViewBag.Session != null)
    {
        <script>

    $(document).ready(function(){

    alert('@ViewBag.Session');

    });

        </script>

    }*@



<script type="text/javascript">
    function scrollToTop() {
        window.scrollTo(0, 0);
    }


    function onBegin() {

        // Show the loader
        document.getElementById('overlayBlock').style.display = 'block';
    }

    function onComplete() {
        // Hide the loader
        scrollToTop();
        document.getElementById('overlayBlock').style.display = 'none';
    }
</script>
